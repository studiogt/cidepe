{"version":3,"file":"jquery.load-more.bundle.js","sources":["jquery.load-more.js"],"sourcesContent":[";(function ($, window, document, undefined ) {\n    \n    Twig.extendFilter(\"hyphenize\",function(value) {        \n        return value.toLowerCase().split(' ').join('-');        \n    });\n\n    Twig.extendFilter(\"text_break\",function(value,chars) {        \n        var words = $('<div />').html(value).text().split(' ');\n        var result = '';\n        $.each(words,function(i,word) {\n            var result2 = result+' '+word;\n            if (result2.length>chars) return false;\n            result = result2;\n        });\n        return result;\n    });\n\n    var pluginName = 'loadMore',\n        defaults = {\n            \n        };\n\n\n    function Plugin( element, options ) {\n        this.element = element;\t        \n\n\n        this.options = $.extend( {}, defaults, options) ;\n        \n        this._defaults = defaults;\n        this._name = pluginName;\n        \n        this.init();\n    }\n\n    Plugin.prototype.init = function () {\n    \tvar $el = $(this.element);\n        this.$el = $el;\n    \tvar options = this.options;\t\n\n    \t\n    \tthis.enviando = false;\n    \tthis.termiou = false;\n        \n        this.next = $el.data('next');\n        this.url = $el.data('url');\n        this.options.records = $el.data('records');\n\n        this.template = twig({data:$el.find('.template').html()});\n    \t\n        var that = this;\n    \t$el.on('click','.btn-more',function(){\n            that.load();\n        });\n    };\n\n    Plugin.prototype.onLoad = function(resp) {\n    \t$.fancybox.hideLoading();\n    \tthis.enviando = false;\n\n    \tif (!resp.success) return;\n    \tif (resp.rows.length<this.options.records) {\n    \t\tthis.termiou = true;\n    \t\tthis.$el.find('.btn-more').hide();\n    \t}\n        this.next += resp.rows.length;\n    \tthis.render(resp.rows);\n    }\n\n    Plugin.prototype.render = function(rows) {\n    \tvar template = this.template;\n        var html = template.render({rows:rows});\n        \n    \tthis.$el.prepend(template.render({rows:rows}));\n    }\n\n    Plugin.prototype.load = function() {\n\t\tif (this.enviando) return false;\n\t\tthis.enviando = true;\n\t\tvar that = this;\n        \n\t\t$.fancybox.showLoading();\n        var callback = function(resp) {\n            that.onLoad(resp);\n        }\n\t\t$.ajax({\n\t\t\turl: this.url,\n\t\t\ttype: 'post',\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tnext: that.next,\n\t\t\t\trows: that.options.records\n\t\t\t},\n\t\t\tsuccess: callback,\n\t\t\terror: function() {\n\t\t\t\tcallback({success: false,msg:\"mensagem de erro\"});\n\t\t\t}\n\t\t});\n    }\n\n    $.fn[pluginName] = function ( options ) {\n        return this.each(function () {\n            if (!$.data(this, 'plugin_' + pluginName)) {\n                $.data(this, 'plugin_' + pluginName, \n                new Plugin( this, options ));\n            }\n        });\n    }\n})( jQuery, window, document );"],"names":[],"mappings":"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"}