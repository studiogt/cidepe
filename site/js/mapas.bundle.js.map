{"version":3,"file":"mapas.bundle.js","sources":["mapas.js"],"sourcesContent":["\"use strict\";\nvar idInfoBoxAberto;\nvar infoBox = [];\nvar abertos = [];\nfunction initialize() {\n\n    // Exibir mapa;\n    var mapOptions = {\n      zoom: 3,\n      center: new google.maps.LatLng(7.017646, -30.481081),\n      scrollwheel: false,\n      panControl: false,\n      //draggable: false,\n      // mapTypeId: google.maps.MapTypeId.ROADMAP\n      mapTypeControlOptions: {\n        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']\n      }\n    }\n\n    // Exibir o mapa na div #mapa;\n    var el = document.getElementById('mapa');\n    if (!el) return;\n    var map = new google.maps.Map(document.getElementById(\"mapa\"), mapOptions);\n\n    // Marcador personalizado;\n    var image = 'https://cdn.jsdelivr.net/gh/binho85/cidepe/img/pin-mapa.png';\n    var marcadorPersonalizado = new google.maps.Marker({\n        map: map,\n        icon: image,\n        animation: google.maps.Animation.DROP\n    });\n\n    function abrirInfoBox(id, marker) {\n        if (typeof(idInfoBoxAberto) == 'number' && typeof(infoBox[idInfoBoxAberto]) == 'object') {\n            infoBox[idInfoBoxAberto].close();\n        }\n     \n        infoBox[id].open(map, marker);\n        idInfoBoxAberto = id;\n    }\n\n    function carregarPontos() {\n \n        $.getJSON('index.php/br/post-get-pontos-onde-encontrar', function(pontos) {\n\n            $.each(pontos, function(index, ponto) {\n\n                ponto.titulo = ponto.titulo||'';\n                ponto.texto = ponto.texto||'';\n                ponto.texto_azul = ponto.texto_azul||'';\n                ponto.Bandeira = ponto.Bandeira||'';\n\n                var marker = new google.maps.Marker({\n                    position: new google.maps.LatLng(ponto.Latitude, ponto.Longitude),\n                    map: map,\n                    icon: image\n                });\n\n                var infowindow = new google.maps.InfoWindow(), marker;\n                abertos.push(infowindow);\n                google.maps.event.addListener(map, \"click\", function(event) {\n                    infowindow.close();\n                });\n \n                google.maps.event.addListener(marker, 'click', (function(marker, i) {\n\n                    return function() {                        \n                        var zoom = map.getZoom();\n                        map.setCenter(marker.position);\n                        /*\n                        if (zoom < 8) {\n                            map.setZoom(8);\n                            return;\n                        } \n                        */\n                        if (zoom < 11) {\n                            map.setZoom(11);\n                            return;\n                        }\n\n                        var html = \"\";\n                        html += \"<div class='wrap-window clearfix'><table style='border:0;width:auto;'><tr>\";\n                        html += \"<td valign='top'>\";\n                        if (ponto.Bandeira!='') {\n                            html += \"<img src='_files/\"+ ponto.Bandeira +\"' />\";\n                        }\n                        html += \"</td><td valign='top'>\";\n                        html += \"<h3 class='ponto-titulo'>\"+ponto.titulo+\"</h3>\";\n                        html += '<div class=\"texto-azul\">'+ponto.texto_azul+'</div>';                    \n                        html += ponto.texto;\n                        html += \"</td></tr></table></div>\";\n                        abertos.forEach(function(e){\n                            e.close();\n                        });\n                        infowindow.setContent(html);\n                        infowindow.open(map, marker);\n                    }\n                })(marker));\n\n            });\n\n        });\n     \n    }     \n    carregarPontos();\n}\n\n\n// Função para carregamento assíncrono\nfunction loadScript() {\n  var script = document.createElement(\"script\");\n  script.type = \"text/javascript\";\n  script.src = \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBFLg3m9No8WQKQpRf7nTK-XAkIS3-wg6s&sensor=true&callback=initialize\";\n  document.body.appendChild(script);\n}\n\nwindow.onload = loadScript;"],"names":[],"mappings":";;;EA4GA;EACA,SAAS,UAAU,GAAG;EACtB,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;EAChD,EAAE,MAAM,CAAC,IAAI,GAAG,iBAAiB,CAAC;EAClC,EAAE,MAAM,CAAC,GAAG,GAAG,qHAAqH,CAAC;EACrI,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;EACpC,CAAC;;EAED,MAAM,CAAC,MAAM,GAAG,UAAU;;;;"}