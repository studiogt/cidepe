{"version":3,"file":"object-fit.bundle.js","sources":["object-fit.js"],"sourcesContent":["(function($, window, document) {\n\n\tvar resizeTimer, toResize = [];\n\n\tvar testForObjectFit = function() {\n\t\t// Borrowed from Modernizr\n    \tvar mStyle = document.createElement('modernizr').style,\n\t\tprop = 'objectFit', \n\t\tomPrefixes = 'Webkit Moz O ms',\n\t\tcssomPrefixes = omPrefixes.split(' '),\n\t\tucProp  = prop.charAt(0).toUpperCase() + prop.slice(1),\n\t\tprops   = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n\t\tfor ( var i in props ) {\n\t        var prop = props[i];\n\t        if ( !!~('' + prop).indexOf(\"-\") && mStyle[prop] !== undefined ) {\n\t            return prefixed == 'pfx' ? prop : true;\n\t        }\n\t    }\n\t    return false;\n\t};\n\t\n\tvar doObjectFit = function(type) {\n\t\t// default type is \"contain\"\n\t\tvar type = type || 'contain';\n\t\tvar supportsObjectFit = testForObjectFit();\n\t\t\n\t\treturn this.each(function() {\n\t\t\tif (supportsObjectFit) {\n\t\t\t\t$(this).css('object-fit', type);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdoResize(this, type);\n\t\t\t}\n\t\t\t\n\t\t});\n\t};\n\n\tvar doResize = function(elem, params) {\n\t\tvar type = typeof(params) === 'string' ? params : params.type,\n\t\t\thideOverflow = params.hideOverflow === undefined ? true : params.hideOverflow;\n\n\t\t// Cache the resize request\n\t\ttoResize.push({elem: elem, params: {type:type, hideOverflow: hideOverflow}});\n\t\t// Find the first block level element, as we need the containing element, not just the next one up\n\t\tfunction findParentRatio(jqObject) {\n\t\t\tvar p = jqObject.parent(),\n\t\t\t\tdisplayType = p.css('display');\n\t\t\t\n\t\t\tif (displayType == 'block' || displayType == '-webkit-box' && p.width() > 0) {\n\t\t\t\treturn { obj: p, width: p.width(), height: p.height(), ratio: (p.width() / p.height()) };\n\t\t\t} else {\n\t\t\t\treturn findParentRatio(p);\n\t\t\t}\n\t\t}\n\n\t\tvar $this = $(elem),\n\t\t\t\tratio = $this.data('ratio'),\n\t\t\t\tparent = findParentRatio($this), // The parent element may not have any width or height, so find one that does\n\t\t\t\tpic_real_width,\n\t\t\t\tpic_real_height;\n\n\t\tvar image = $(\"<img/>\") // Make in memory copy of image to avoid css issues\n\t\t\t.load(function() {\n\t\t\t\tpic_real_width = this.width;   // Note: $(this).width() will not\n\t\t\t\tpic_real_height = this.height; // work for in memory images.\n\n\t\t\t\t// set the ratio of the object. we assume, that the ratio of the object never changes.\n\t\t\t\tif (ratio === undefined) {\n\t\t\t\t\tratio = pic_real_width / pic_real_height;\n\t\t\t\t\t$this.data('ratio', ratio);\n\t\t\t\t}\n\n\t\t\t\t// Set the width/height\n\t\t\t\tif (type === 'contain') {\n\t\t\t\t\tif (parent.ratio > ratio) {\n\t\t\t\t\t\t$this.width(parent.height * ratio);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.height(parent.width / ratio).width('100%');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (type === 'cover') {\n\t\t\t\t\t// At least one dimension is smaller, so cover needs to size the image\n\t\t\t\t\tif (parent.width > pic_real_width || parent.height > pic_real_height) {\n\t\t\t\t\t\tif (parent.ratio > ratio) {\n\t\t\t\t\t\t\t$this.width(parent.width).height(parent.height * ratio);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.height(parent.height).width(parent.width * ratio);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (hideOverflow) {\n\t\t\t\t\t\t// Apply overflow-hidden, or it looks ugly\n\t\t\t\t\t\tparent.obj.css('overflow', 'hidden');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\timage.attr(\"src\", $this.attr(\"src\")); // Has to be done outside of assignment for IE\n\t};\n\n\t$.fn.objectFit = doObjectFit;\n\n\t$(window).resize(function() {\n\t\tclearTimeout(resizeTimer);\n\t\tfor(var i=0, len = toResize.length; i<len; i++) {\n\t\t\tvar a = toResize[i];\n\t\t\tresizeTimer = setTimeout(function() { doResize(a.elem, a.params);}, 100);\n\t\t}\n\t});\n\n\n})(jQuery, window, document);"],"names":[],"mappings":"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"}